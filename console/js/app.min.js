!function(){$(".navbar-nav li a").click(function(){$("html, body").animate({scrollTop:0},"slow");var e=$(".navbar-toggle").is(":visible");e&&$(".navbar-collapse").collapse("hide")});var e=angular.module("site",["ngRoute"]);e.controller("PageController",["$scope","$location",function(e,a){this.page=this.title=a.path().substring(1),this.setActive=function(e){this.page=e},this.isActive=function(e){return this.page===e}}]),e.controller("ConsoleController",["$scope","$http","$location",function(e,a,r){var t=this;this.verbMap={GET:"info",PUT:"warning",POST:"success",DELETE:"danger"};var o=r.absUrl();$("#jsonUrl").val(o.substr(0,o.lastIndexOf("/console"))+"/assets/des.json"),this.loadDef=function(e){a.get(e).success(function(e,a,o,n){r.search("api",n.url),t.showDef(e)}).error(function(){t.grabDef()})},this.showDef=function(e){t.apiDef=e,$("#method_list").html(""),$("#method_pulldown").html(""),angular.forEach(e.resources,function(e,a){angular.forEach(e.methods,function(e,r){var o=angular.uppercase(e.verb),n=e.displayName,l=e.description,s=a+"||"+r,i='data-resourceIndex="'+s+'"',p='data-toggle="tooltip" data-placement="auto" title="'+l.replace(/<[^>]+>/gm,"")+'"',c="list-group-item";t.verbMap.hasOwnProperty(o)&&(c+=" list-group-item-"+t.verbMap[o]),$("#method_list").append('<a class="'+c+'" href="#" '+i+" "+p+'><span class="label label-default">'+o+"</span>"+n+"</a>"),$("#method_pulldown").append("<option "+i+' value="'+s+'">'+o+" "+n+"</option>")})}),$('[data-toggle="tooltip"]').tooltip(),$("#method_list a").unbind("click").click(function(){return $("html, body").animate({scrollTop:0},"slow"),t.showMethod($(this).attr("data-resourceIndex")),!1}),$("#method_pulldown").unbind("change").change(function(){t.showMethod($(this).val())})},this.grabDef=function(){var e=r.search().hasOwnProperty("api")?r.search().api:!1;e?t.loadDef(e):$("#notificationModal").modal("show").find("button.js-loadDef").click(function(){t.loadDef($.trim($("#jsonUrl").val()))})}(),this.showMethod=function(e){{var a=e.split("||"),r=t.apiDef.resources[a[0]],o=r.methods[a[1]],n={verb:angular.uppercase(o.verb),name:o.displayName,description:o.description,path:o.path,base:o.baseUrl,parameters:{}};!function(){angular.forEach([r,o],function(e){e.hasOwnProperty("parameters")&&null!==e.parameters&&angular.forEach(e.parameters,function(e){if(e.hasOwnProperty("type")&&e.hasOwnProperty("name")){var a=angular.lowercase(e.type);n.parameters.hasOwnProperty(a)||(n.parameters[a]={}),n.parameters[a][e.name]=e}}),e.hasOwnProperty("body")&&null!==e.body&&e.body.hasOwnProperty("parameters")&&null!==e.body.parameters&&e.body.parameters.length>0&&(n.parameters.hasOwnProperty("body")||(n.parameters.body={}),angular.forEach(e.body.parameters,function(e){e.hasOwnProperty("name")&&(n.parameters.body[e.name]=e)}))})}(),function(){$("#request_method").text(n.verb).removeClass("info warning success danger"),t.verbMap.hasOwnProperty(n.verb)&&$("#request_method").addClass(t.verbMap[n.verb]),$("#request_url").val(n.path).attr({"data-path":n.path,"data-base":n.base})}(),function(){$("#request_information_tab").html(""),angular.forEach(["base","name","description"],function(e){$("#request_information_tab").append("<dt>"+e+"</dt><dd>"+n[e]+"</dd>")})}(),function(){$("#request_form").html("");var e=["template","query","header","body"];angular.forEach(n.parameters,function(a,r){-1===$.inArray(r,e)&&e.push(r)}),angular.forEach(e,function(e){if(n.parameters.hasOwnProperty(e)){var a=wrapWithTag(e,"legend"),r=[];angular.forEach(n.parameters[e],function(a,t){console.log(t),console.log(a);var o="request_"+e+"_"+t,n=wrapWithTag(t,"label",{"for":o}),l={name:t,id:o,"class":"form-control",type:"text"};a.hasOwnProperty("defaultValue")&&null!==a.defaultValue&&a.defaultValue.length>0&&(l.placeholder=l.value=a.defaultValue),a.hasOwnProperty("required")&&a.required===!0&&(l.required=!0),n+=wrapWithTag(" ","input",l),a.hasOwnProperty("description")&&null!==a.description&&a.description.length>0&&(n+=wrapWithTag(a.description,"p",{"class":"help-block"})),r.push(wrapWithTag(n,"div",{"class":"form-group"}))}),a+=r.join(""),$("#request_form").append(wrapWithTag(a,"fieldset"))}})}()}}}]),e.controller("HelpController",function(){}),e.config(["$routeProvider","$locationProvider",function(e,a){e.when("/console",{templateUrl:"partials/console.html",controller:"ConsoleController"}),e.when("/help",{templateUrl:"partials/help.html",controller:"HelpController"}),e.otherwise({redirectTo:"/console"}),a.html5Mode(!0).hashPrefix("!")}])}();